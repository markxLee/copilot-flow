# Copilot Workflow System

> A governed, multi-phase workflow for AI-assisted software development.
> Há»‡ thá»‘ng workflow cÃ³ kiá»ƒm soÃ¡t, Ä‘a phase cho phÃ¡t triá»ƒn pháº§n má»m vá»›i AI.

---

## ğŸ¯ Overview / Tá»•ng quan

This repository contains a complete workflow system for GitHub Copilot to manage complex development tasks across multi-root VS Code workspaces.

Repository nÃ y chá»©a há»‡ thá»‘ng workflow hoÃ n chá»‰nh Ä‘á»ƒ GitHub Copilot quáº£n lÃ½ cÃ¡c task phÃ¡t triá»ƒn phá»©c táº¡p trÃªn multi-root VS Code workspaces.

### Key Features / TÃ­nh nÄƒng ChÃ­nh

- âœ… **6-Phase Workflow** â€” Analysis â†’ Spec â†’ Tasks â†’ Impl â†’ Tests â†’ Done
- âœ… **Multi-Root Support** â€” Work across multiple repositories
- âœ… **State Management** â€” Resume work after session breaks
- âœ… **Review Gates** â€” Approval required at each phase
- âœ… **Iteration Support** â€” Handle requirement changes with versioned docs
- âœ… **Bilingual Docs** â€” English & Vietnamese inline format
- âœ… **PR Automation** â€” Generate PR descriptions and reviewer notifications
- âœ… **Shared Instructions** â€” Sync coding standards across all roots

---

## ğŸ“ Structure / Cáº¥u trÃºc

```
copilot-flow/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ copilot-instructions.md      # Entry point (auto-read by Copilot)
â”‚   â”œâ”€â”€ instructions/
â”‚   â”‚   â””â”€â”€ shared/                  # Shared instructions (sync to other roots)
â”‚   â”‚       â”œâ”€â”€ coding-practices.instructions.md
â”‚   â”‚       â”œâ”€â”€ typescript.instructions.md
â”‚   â”‚       â”œâ”€â”€ testing.instructions.md
â”‚   â”‚       â””â”€â”€ code-review.instructions.md
â”‚   â””â”€â”€ prompts/                     # All workflow prompts
â”‚       â”œâ”€â”€ init-context.prompt.md
â”‚       â”œâ”€â”€ work-intake.prompt.md
â”‚       â”œâ”€â”€ work-update.prompt.md
â”‚       â”œâ”€â”€ work-review.prompt.md
â”‚       â”œâ”€â”€ phase-0-analysis.prompt.md
â”‚       â”œâ”€â”€ phase-1-spec.prompt.md
â”‚       â”œâ”€â”€ spec-review.prompt.md
â”‚       â”œâ”€â”€ phase-2-tasks.prompt.md
â”‚       â”œâ”€â”€ task-plan-review.prompt.md
â”‚       â”œâ”€â”€ phase-3-impl.prompt.md
â”‚       â”œâ”€â”€ code-review.prompt.md
â”‚       â”œâ”€â”€ code-fix-plan.prompt.md
â”‚       â”œâ”€â”€ code-fix-apply.prompt.md
â”‚       â”œâ”€â”€ phase-4-tests.prompt.md
â”‚       â”œâ”€â”€ test-verify.prompt.md
â”‚       â”œâ”€â”€ phase-5-done.prompt.md
â”‚       â”œâ”€â”€ pr-description.prompt.md
â”‚       â”œâ”€â”€ pr-notify-reviewers.prompt.md
â”‚       â”œâ”€â”€ workflow-resume.prompt.md
â”‚       â”œâ”€â”€ memory-context-hygiene.prompt.md
â”‚       â”œâ”€â”€ workspace-discovery.prompt.md
â”‚       â”œâ”€â”€ workspace-update-root.prompt.md
â”‚       â”œâ”€â”€ cross-root-guide.prompt.md   # Auto-config cross-root relationships
â”‚       â”œâ”€â”€ sync-instructions.prompt.md  # Sync shared instructions + tech detection
â”‚       â”œâ”€â”€ sync-vscode-settings.prompt.md # Sync VS Code settings
â”‚       â”œâ”€â”€ generate-workspace-files.prompt.md # Generate .code-workspace & ARCHITECTURE.md
â”‚       â”œâ”€â”€ quick-ref.prompt.md          # Quick reference / cheat sheet
â”‚       â”œâ”€â”€ rollback.prompt.md           # Undo implementation changes
â”‚       â””â”€â”€ lite-mode.prompt.md          # Streamlined workflow for simple tasks
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ workflow/
â”‚   â”‚   â””â”€â”€ contract.md              # Workflow rules & contract
â”‚   â”œâ”€â”€ templates/                   # Phase document templates
â”‚   â”‚   â”œâ”€â”€ 00_analysis.template.md
â”‚   â”‚   â”œâ”€â”€ 01_spec.template.md
â”‚   â”‚   â”œâ”€â”€ 02_tasks.template.md
â”‚   â”‚   â”œâ”€â”€ 03_impl.template.md
â”‚   â”‚   â”œâ”€â”€ 04_tests.template.md
â”‚   â”‚   â”œâ”€â”€ 05_done.template.md
â”‚   â”‚   â”œâ”€â”€ workflow-state.template.yaml
â”‚   â”‚   â”œâ”€â”€ vscode-settings.template.json  # VS Code settings template
â”‚   â”‚   â”œâ”€â”€ code-workspace.template.json   # .code-workspace template
â”‚   â”‚   â””â”€â”€ architecture.template.md       # ARCHITECTURE.md template
â”‚   â””â”€â”€ runs/                        # Active workflow artifacts
â”‚       â””â”€â”€ <branch-slug>/           # Per-branch workflow docs
â”œâ”€â”€ WORKSPACE_CONTEXT.md             # Multi-root workspace info
â””â”€â”€ README.md                        # This file

# Generated files (not in repo, created per-workspace):
# ../<workspace>.code-workspace      # Generated by `setup workspace`
# ./ARCHITECTURE.md                  # Generated by `setup workspace`
```

---

## ğŸš€ Quick Start / Báº¯t Ä‘áº§u Nhanh

### 1. First-Time Setup (One-time)

Open all roots in VS Code, then say to Copilot:
```
setup workspace
```

This runs 4 steps:
1. **Discovery** â†’ Creates WORKSPACE_CONTEXT.md
2. **Cross-root** â†’ Configures cross-root patterns  
3. **Sync instructions** â†’ Copies coding standards + detects tech stacks
4. **Generate files** â†’ Creates .code-workspace + ARCHITECTURE.md

### 2. Open Workspace (After Setup)

```bash
# Open generated workspace file
code <workspace-name>.code-workspace
```

### 3. Start a New Session

Say to Copilot:
```
init
```

Copilot will:
- Load workspace context
- Check for existing workflow
- Report current state

### 4. Start New Work

Say:
```
Add analytics tracking to dashboard
```

Copilot will:
- Run `work-intake` to capture requirements
- Run `work-review` to verify readiness
- Guide you through phases 0-5

### 5. Quick Fix (Lite Mode)

For simple tasks that don't need full workflow:
```
lite: fix typo in error message
```

Copilot will:
- Skip phases 0-2 (no analysis/spec/tasks)
- Implement directly
- Quick review and done

---

## ï¿½ Shared Instructions / Instructions DÃ¹ng Chung

Maintain consistent coding standards across all workspace roots.

### Structure / Cáº¥u trÃºc

```
copilot-flow/.github/instructions/shared/    # Master copies (edit here)
â”œâ”€â”€ coding-practices.instructions.md         # Error handling, code style
â”œâ”€â”€ typescript.instructions.md               # TypeScript standards
â””â”€â”€ testing.instructions.md                  # Test conventions

<other-roots>/.github/instructions/          # Synced copies (auto-generated)
â”œâ”€â”€ coding-practices.instructions.md         # â† Synced
â”œâ”€â”€ typescript.instructions.md               # â† Synced
â””â”€â”€ <root-specific>.instructions.md          # â† Root-specific (not synced)
```

### Sync Instructions / Äá»“ng bá»™ Instructions

```bash
# Sync shared instructions to all roots + analyze tech stacks
sync instructions

# Sync to specific root only
sync instructions to apphub-vision

# Sync except specific root
sync instructions except reviews-assets

# Sync without tech stack analysis
sync instructions --skip-analysis

# Only analyze tech stacks, don't sync
suggest instructions

# Analyze specific root
suggest instructions for python-service
```

**Auto Tech Stack Detection**: When syncing, Copilot automatically:
1. Detects each root's tech stack (Python, Go, Java, etc.)
2. Compares with existing shared instructions
3. Suggests creating missing instructions from templates

### Adding New Shared Instructions / ThÃªm Instructions Má»›i

1. Create file in `copilot-flow/.github/instructions/shared/`
2. Run `sync instructions`
3. File will be copied to all workspace roots

### Root-Specific Instructions / Instructions RiÃªng

Each root can have additional instructions that are NOT synced:
- `apphub-vision`: prisma.instructions.md, ai-api.instructions.md
- `reviews-assets`: storybook.instructions.md
- `boost-pfs-backend`: api-design.instructions.md

---\n\n## ğŸ“Š Workflow Diagram with Explicit Prompts / SÆ¡ Ä‘á»“ Workflow vá»›i Prompt TÆ°á»ng minh

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     WORKSPACE SETUP (one-time)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 1: workspace-discovery  â†’  Creates WORKSPACE_CONTEXT.md       â”‚
â”‚  Step 2: cross-root           â†’  Configure cross-root patterns      â”‚
â”‚  Step 3: sync instructions    â†’  Sync standards + detect tech stack â”‚
â”‚  Step 4: generate files       â†’  .code-workspace + ARCHITECTURE.md  â”‚
â”‚                                                                     â”‚
â”‚  Quick setup: say "setup workspace" â†’ runs all 4 steps              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SESSION START                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  init  â†’  Check existing workflow  â†’  Resume or New?                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                               â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   RESUME     â”‚               â”‚   NEW WORK   â”‚
            â”‚   resume     â”‚               â”‚ /work-intake â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                               â”‚
                    â”‚                               â–¼
                    â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                      â”‚ /work-review â”‚
                    â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PHASE 0: ANALYSIS                            â”‚
â”‚                        /phase-0-analysis                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â†’ analysis.md  â†’  â¸ï¸ STOP (approval required)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ /phase-1-spec
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PHASE 1: SPECIFICATION                         â”‚
â”‚                         /phase-1-spec                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â†’ spec.md  â†’  /spec-review (recommended)  â†’  â¸ï¸ STOP               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ /phase-2-tasks
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PHASE 2: TASK PLANNING                        â”‚
â”‚                         /phase-2-tasks                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â†’ tasks.md  â†’  /task-plan-review (recommended)  â†’  â¸ï¸ STOP         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ /phase-3-impl T-001
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PHASE 3: IMPLEMENTATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FOR EACH TASK:                                              â”‚   â”‚
â”‚  â”‚  /phase-3-impl T-XXX â†’ implement â†’ â¸ï¸ STOP                   â”‚   â”‚
â”‚  â”‚       â”‚                                                      â”‚   â”‚
â”‚  â”‚       â–¼                                                      â”‚   â”‚
â”‚  â”‚  /code-review T-XXX â†’ APPROVE? â”€â”€yesâ”€â”€â†’ /phase-3-impl T-YYY  â”‚   â”‚
â”‚  â”‚       â”‚                                                      â”‚   â”‚
â”‚  â”‚       â”‚ REQUEST CHANGES                                      â”‚   â”‚
â”‚  â”‚       â–¼                                                      â”‚   â”‚
â”‚  â”‚  /code-fix-plan T-XXX â†’ fix â†’ /code-review T-XXX             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ /phase-4-tests
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PHASE 4: TESTING                            â”‚
â”‚                         /phase-4-tests                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â†’ tests â†’ user runs tests â†’ report results â†’ â¸ï¸ STOP               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ /phase-5-done
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PHASE 5: DONE CHECK                          â”‚
â”‚                         /phase-5-done                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â†’ DoD verification  â†’  done.md  â†’  â¸ï¸ STOP                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ pr
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          POST-COMPLETION                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  pr-description  â†’  PR_DESCRIPTION.md                               â”‚
â”‚  pr-notify-reviewers  â†’  Slack/Teams message                        â”‚
â”‚  User: git commit, push, create PR                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ® Commands / CÃ¡c Lá»‡nh

### âš ï¸ IMPORTANT: Use Explicit Prompt References

Generic commands like `go`, `approved` can cause phase skipping in long conversations. 
**Always use explicit `/prompt-name` to ensure correct flow.**

### Explicit Prompt References (RECOMMENDED)

| Prompt | When to Use |
|--------|-------------|
| `/work-intake` | Capture work description |
| `/work-review` | Review work readiness |
| `/work-update` | Handle requirement changes & iterations |
| `/phase-0-analysis` | Start Phase 0: Analysis |
| `/phase-1-spec` | Start Phase 1: Specification |
| `/spec-review` | Review spec (recommended before Phase 2) |
| `/phase-2-tasks` | Start Phase 2: Task Planning |
| `/task-plan-review` | Review task plan (recommended before Phase 3) |
| `/phase-3-impl T-XXX` | Implement specific task |
| `/phase-3-impl next` | Implement next incomplete task |
| `/code-review T-XXX` | Review task changes |
| `/code-fix-plan T-XXX` | Plan fixes for review issues |
| `/code-fix-apply T-XXX` | Apply approved fixes |
| `/phase-4-tests` | Start Phase 4: Testing |
| `/test-verify` | Verify test coverage & quality |
| `/phase-5-done` | Start Phase 5: Done Check |
| `/pr-description` | Generate PR description |
| `/pr-notify-reviewers` | Generate reviewer notification |
| `/workflow-resume` | Resume from saved state |
| `/rollback` | Undo implementation changes |
| `/lite-mode` | Start lite mode for simple tasks |

### Session Commands (Safe)

| Say | Action |
|-----|--------|
| `init` / `start` | Initialize session, load context |
| `resume` / `tiáº¿p tá»¥c` | Continue from saved state |
| `status` / `tráº¡ng thÃ¡i` | Show current workflow status |
| `help` / `?` | Show quick reference card |

### âš ï¸ Risky Commands (Avoid in long conversations)

| Command | Risk | Alternative |
|---------|------|-------------|
| ~~`approved`~~ / ~~`duyá»‡t`~~ | âŒ May skip phases | Use explicit `/phase-X-xxx` |
| ~~`go`~~ / ~~`tiáº¿p`~~ | âŒ May skip phases | Use explicit `/phase-X-xxx` |
| ~~`continue`~~ | âŒ May skip phases | Use explicit `/phase-X-xxx` |
| ~~`review`~~ | âŒ Ambiguous scope | Use `/spec-review`, `/task-plan-review`, `/code-review T-XXX` |

### Safety Commands

| Say | Action |
|-----|--------|
| `rollback` | Undo implementation changes |
| `reset context` | Clear confused state |
| `abort` | Cancel current operation |

---

## ğŸ“ Workflow Artifacts / Artifacts Workflow

All artifacts are stored in `docs/runs/<branch-slug>/`:

```
docs/runs/feature-add-analytics/
â”œâ”€â”€ .workflow-state.yaml       # State tracking (AI reads/writes)
â”œâ”€â”€ README.md                  # Summary for human reviewers
â”œâ”€â”€ 00_analysis/
â”‚   â””â”€â”€ analysis.md
â”œâ”€â”€ 01_spec/
â”‚   â””â”€â”€ spec.md
â”œâ”€â”€ 02_tasks/
â”‚   â””â”€â”€ tasks.md
â”œâ”€â”€ 03_impl/
â”‚   â””â”€â”€ impl-log.md
â”œâ”€â”€ 04_tests/
â”‚   â””â”€â”€ tests.md
â”œâ”€â”€ 05_done/
â”‚   â””â”€â”€ done.md
â””â”€â”€ PR_DESCRIPTION.md
```

### Iteration Naming

When requirements change, new docs use suffix:
```
spec.md          â†’ Original
spec-update-1.md â†’ First iteration
spec-update-2.md â†’ Second iteration
```

---

## ğŸŒ Multi-Root Workspace / Workspace Äa Root

This system is designed for multi-root VS Code workspaces:

| Root | Purpose |
|------|---------|
| `copilot-flow` | **impl_root** â€” All workflow docs stored here |
| `apphub-vision` | Main application code |
| `reviews-assets` | UI component library |
| `boost-pfs-backend` | Backend services |

### Key Concept: impl_root

All workflow documents are stored in `copilot-flow`, regardless of which roots have code changes. This ensures:

- Single location for reviewers
- One PR for workflow docs
- Code doesn't get cluttered with workflow artifacts

---

## âš™ï¸ Configuration / Cáº¥u hÃ¬nh

### WORKSPACE_CONTEXT.md

Update this file when workspace structure changes:
```yaml
meta:
  impl_root: copilot-flow  # Where workflow docs go

roots:
  apphub-vision:
    type: monorepo
    pkg_manager: pnpm
    # ...
```

### State File (.workflow-state.yaml)

Tracks current workflow progress:
```yaml
meta:
  branch_slug: feature-add-analytics
  update_count: 0

status:
  current_phase: 3
  current_task: T-002
  last_action: "Completed T-001"
  next_action: "Implement T-002"

phases:
  phase_0_analysis:
    status: approved
  phase_1_spec:
    status: approved
  # ...
```

---

## ï¿½ Example: Full Workflow Run / VÃ­ dá»¥: Cháº¡y Workflow Äáº§y Ä‘á»§

Below is a complete example of using the governed workflow for a real feature.
DÆ°á»›i Ä‘Ã¢y lÃ  vÃ­ dá»¥ hoÃ n chá»‰nh vá» sá»­ dá»¥ng governed workflow cho má»™t tÃ­nh nÄƒng thá»±c.

### Scenario / TÃ¬nh huá»‘ng

> **Feature Request:** Add Google Analytics 4 tracking to the dashboard
> **YÃªu cáº§u:** ThÃªm tracking Google Analytics 4 vÃ o dashboard

### Step-by-Step / Tá»«ng bÆ°á»›c

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SESSION START                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ You: init                                                                    â”‚
â”‚                                                                              â”‚
â”‚ Copilot: ğŸ“ Session initialized                                             â”‚
â”‚          impl_root: copilot-flow                                             â”‚
â”‚          No active workflow found.                                           â”‚
â”‚          Describe your work to start.                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WORK INTAKE (capturing requirements)                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ You: Add analytics tracking to dashboard to understand user behavior         â”‚
â”‚                                                                              â”‚
â”‚ Copilot: ## ğŸ“‹ Work Description                                              â”‚
â”‚          | Work Type | FEATURE |                                             â”‚
â”‚          | Title | Add Analytics Tracking |                                  â”‚
â”‚          | Affected Roots | apphub-vision |                                  â”‚
â”‚                                                                              â”‚
â”‚          ### Missing Information âš ï¸                                          â”‚
â”‚          1. Which analytics provider? (GA4, Mixpanel, custom?)               â”‚
â”‚          2. Which events to track? (page views, clicks, custom?)             â”‚
â”‚          3. PII handling? (anonymous or user IDs?)                           â”‚
â”‚                                                                              â”‚
â”‚ You: Use GA4, track page views and button clicks, anonymous only             â”‚
â”‚                                                                              â”‚
â”‚ Copilot: âœ… Work description complete. Running work-review...                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WORK REVIEW (confirming scope)                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ Copilot: ## ğŸ” Work Review                                                   â”‚
â”‚          | Verdict | âœ… READY |                                              â”‚
â”‚                                                                              â”‚
â”‚          ### Acceptance Criteria                                             â”‚
â”‚          - [ ] GA4 SDK integrated                                            â”‚
â”‚          - [ ] Page view events sent on navigation                           â”‚
â”‚          - [ ] Button click events tracked                                   â”‚
â”‚          - [ ] No PII in event data                                          â”‚
â”‚                                                                              â”‚
â”‚          Ready to proceed? Say `approved` to continue.                       â”‚
â”‚                                                                              â”‚
â”‚ You: approved                                                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 0: ANALYSIS (â¸ï¸ approval gate)                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ Copilot: ## ğŸ”¬ Phase 0: Analysis                                             â”‚
â”‚                                                                              â”‚
â”‚          ### Research Summary                                                â”‚
â”‚          - Dashboard uses Next.js App Router                                 â”‚
â”‚          - No existing analytics integration                                 â”‚
â”‚          - GA4 can use gtag.js or @analytics/google-analytics                â”‚
â”‚                                                                              â”‚
â”‚          ### Design Options                                                  â”‚
â”‚          | Option | Pros | Cons |                                            â”‚
â”‚          | gtag.js | Simple | Manual setup |                                 â”‚
â”‚          | @analytics/google-analytics | Type-safe | Extra dep |             â”‚
â”‚                                                                              â”‚
â”‚          ### Recommendation                                                  â”‚
â”‚          Use gtag.js with custom hook for simplicity.                        â”‚
â”‚                                                                              â”‚
â”‚          â¸ï¸ STOP: Approve to proceed to Specification.                       â”‚
â”‚                                                                              â”‚
â”‚ You: approved                                                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 1: SPECIFICATION (â¸ï¸ approval gate)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ Copilot: ## ğŸ“ Phase 1: Specification                                        â”‚
â”‚                                                                              â”‚
â”‚          ### Functional Requirements                                         â”‚
â”‚          FR-001: Initialize GA4 on app load                                  â”‚
â”‚          FR-002: Track page views on route change                            â”‚
â”‚          FR-003: Track button clicks with event name                         â”‚
â”‚                                                                              â”‚
â”‚          ### Non-Functional Requirements                                     â”‚
â”‚          NFR-001: No impact on Core Web Vitals                               â”‚
â”‚          NFR-002: Graceful degradation if GA blocked                         â”‚
â”‚                                                                              â”‚
â”‚          â¸ï¸ STOP: Approve to proceed to Task Planning.                       â”‚
â”‚                                                                              â”‚
â”‚ You: approved                                                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 2: TASK PLANNING (â¸ï¸ approval gate)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ Copilot: ## ğŸ“‹ Phase 2: Task Planning                                        â”‚
â”‚                                                                              â”‚
â”‚          | ID | Task | Root | Est |                                          â”‚
â”‚          | T-001 | Create analytics hook | apphub-vision | 30m |             â”‚
â”‚          | T-002 | Add GA script to layout | apphub-vision | 15m |           â”‚
â”‚          | T-003 | Integrate page tracking | apphub-vision | 30m |           â”‚
â”‚          | T-004 | Add click tracking HOC | apphub-vision | 45m |            â”‚
â”‚                                                                              â”‚
â”‚          Total: 4 tasks, ~2 hours                                            â”‚
â”‚                                                                              â”‚
â”‚          â¸ï¸ STOP: Approve to start implementation.                           â”‚
â”‚                                                                              â”‚
â”‚ You: approved                                                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 3: IMPLEMENTATION (â¸ï¸ per-task review)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ Copilot: ## ğŸ”§ Implementing T-001: Create analytics hook                     â”‚
â”‚                                                                              â”‚
â”‚          Created: apps/dashboard/src/hooks/useAnalytics.ts                   â”‚
â”‚                                                                              â”‚
â”‚          â¸ï¸ STOP: Review changes. Say `next task` when ready.                â”‚
â”‚                                                                              â”‚
â”‚ You: next task                                                               â”‚
â”‚                                                                              â”‚
â”‚ Copilot: ## ğŸ”§ Implementing T-002: Add GA script to layout                   â”‚
â”‚          ...                                                                 â”‚
â”‚                                                                              â”‚
â”‚ (repeat for T-003, T-004)                                                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 4: TESTING (â¸ï¸ approval gate)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ Copilot: ## ğŸ§ª Phase 4: Testing                                              â”‚
â”‚                                                                              â”‚
â”‚          Created tests for useAnalytics hook                                 â”‚
â”‚          Run: pnpm --filter dashboard test                                   â”‚
â”‚                                                                              â”‚
â”‚          â¸ï¸ STOP: Run tests and report results.                              â”‚
â”‚                                                                              â”‚
â”‚ You: Tests pass, 85% coverage                                                â”‚
â”‚                                                                              â”‚
â”‚ Copilot: âœ… Coverage meets threshold. Proceeding to Done Check.              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 5: DONE CHECK (â¸ï¸ final approval)                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ Copilot: ## âœ… Phase 5: Done Check                                           â”‚
â”‚                                                                              â”‚
â”‚          ### Definition of Done                                              â”‚
â”‚          - [x] All acceptance criteria met                                   â”‚
â”‚          - [x] Tests pass (85% coverage)                                     â”‚
â”‚          - [x] No lint errors                                                â”‚
â”‚          - [x] Docs updated                                                  â”‚
â”‚                                                                              â”‚
â”‚          â¸ï¸ STOP: Approve to generate PR description.                        â”‚
â”‚                                                                              â”‚
â”‚ You: approved                                                                â”‚
â”‚                                                                              â”‚
â”‚ Copilot: ğŸ“„ Generated PR_DESCRIPTION.md                                      â”‚
â”‚          Ready to commit and push!                                           â”‚
â”‚                                                                              â”‚
â”‚          Say `notify` to generate reviewer message.                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Takeaways / Äiá»ƒm chÃ­nh

1. **Every phase has a STOP gate** â€” You stay in control
2. **State is saved** â€” Resume anytime with `resume`
3. **Questions are asked upfront** â€” No surprises later
4. **One task at a time** â€” Easier to review
5. **Artifacts generated** â€” Full documentation trail

---

## ï¿½ğŸ“‹ Phase Summary / TÃ³m táº¯t Phase

| Phase | Name | Output | Gate |
|-------|------|--------|------|
| 0 | Analysis & Design | analysis.md | â¸ï¸ Approval |
| 1 | Specification | spec.md | â¸ï¸ Approval + Review |
| 2 | Task Planning | tasks.md | â¸ï¸ Approval + Review |
| 3 | Implementation | impl-log.md | â¸ï¸ Per-task review |
| 4 | Testing | tests.md | â¸ï¸ Coverage â‰¥70% |
| 5 | Done Check | done.md | â¸ï¸ DoD verification |

---

## ğŸ”’ Safety Rules / Quy táº¯c An toÃ n

Copilot MUST NOT:
- âŒ Perform git write operations (add, commit, push)
- âŒ Skip approval gates
- âŒ Implement multiple tasks at once
- âŒ Run tests automatically
- âŒ Create docs in wrong root

Copilot MUST:
- âœ… STOP after each phase for approval
- âœ… Update state after each action
- âœ… Verify impl_root before creating docs
- âœ… Provide verification commands (not run them)

---

## ğŸ†˜ Troubleshooting / Xá»­ lÃ½ Sá»± cá»‘

### "No workflow found"
```
Say: init
Then: <describe your work>
```

### "Phase X not approved"
```
Complete the review for Phase X first:
Say: review
Then: approved (if ready)
```

### "Wrong root for docs"
```
Check WORKSPACE_CONTEXT.md
Ensure impl_root is set correctly
```

### Resume lost session
```
Say: resume
Copilot will load state from .workflow-state.yaml
```

---

## ğŸ“š Related Documents / TÃ i liá»‡u LiÃªn quan

| Document | Purpose |
|----------|---------|
| [Workflow Contract](docs/workflow/contract.md) | Full rules and contract |
| [Templates](docs/templates/) | Phase document templates |
| [Copilot Instructions](.github/copilot-instructions.md) | Entry point for Copilot |

---

## ğŸ·ï¸ Version / PhiÃªn báº£n

- **Workflow Version:** 2.0
- **Last Updated:** 2026-01-23
- **Features:** Multi-root, State Management, Bilingual, Iterations

---

## ğŸ“„ License / Giáº¥y phÃ©p

Internal use only / Chá»‰ sá»­ dá»¥ng ná»™i bá»™

---

**Happy coding with Copilot! ğŸš€**